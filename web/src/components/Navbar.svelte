<script lang="ts">
  type LinkInfo = string | {name: string; title: string};
  export let links: LinkInfo[];
  import NavLink from './NavLink.svelte';
  import {wallet, builtin, chain, flow} from '../stores/wallet';
  import {creatorAddress, creatorStatus, Status} from '../stores/creatorAddress';
  import Button from '../components/Button.svelte';
  import Link from '../_routing/curi/Link.svelte';

  // fetch creator data for conditional rendering
  $: $wallet.address && creatorAddress.fetch($wallet.address);
</script>

<nav class="top-0 z-50 w-full flex flex-wrap items-center justify-between navbar-expand-lg bg-white shadow">
  <ul class="flex m-2">
    {#each links as link}
      <NavLink name={typeof link === 'string' ? link : link.name}>
        {typeof link === 'string' ? link : link.title}
      </NavLink>
    {/each}
  </ul>

  <ul class="flex flex-row list-none lg:ml-auto">
    <li class="-mb-px mr-1">
      <a
        class="px-4 py-3 inline-block rounded-md text-sm font-medium text-gray-700 hover:text-white hover:bg-gray-700"
        href="/pitchdeck/"><i class="text-gray-500 fas fa-file-powerpoint text-lg leading-lg mr-2" />Pitch Deck
      </a>
    </li>
    <li class="flex items-center">
      <a
        class="hover:text-gray-600 text-gray-800 px-3 py-2 flex items-center text-xs uppercase font-bold"
        href="https://twitter.com/creaton_io"
        target="_blank">
        <i class="text-gray-500 fab fa-twitter text-lg leading-lg" />
      </a>
    </li>

    <li class="flex items-center">
      <a
        class="hover:text-gray-600 text-gray-800 px-3 py-2 flex items-center text-xs uppercase font-bold"
        href="https://github.com/creaton-io/creaton?ref=homepage"
        target="_blank">
        <i class="text-gray-500 fab fa-github text-lg leading-lg" />
      </a>
    </li>

    <li class="flex items-center">
      <a
        class="hover:text-gray-600 text-gray-800 px-3 py-2 flex items-center text-xs uppercase font-bold"
        href="https://medium.com/creaton"
        target="_blank">
        <i class="text-gray-500 fab fa-medium-m text-lg leading-lg" />
      </a>
    </li>

    <li class="flex items-center">
      <a
        class="hover:text-gray-600 text-gray-800 px-3 py-2 flex items-center text-xs uppercase font-bold"
        href="https://t.me/creaton_io"
        target="_blank">
        <i class="text-gray-500 fab fa-telegram-plane text-lg leading-lg" />
      </a>
    </li>
    <li class="flex items-center mr-2">
      {#if $creatorStatus === Status.IsNotCreator}
        <Link name="Sign up">
          <Button label="create a tier">Create Tier</Button>
        </Link>
      {:else if $creatorStatus === Status.IsCreator}
        <Link name="Upload">
          <Button label="upload content">Upload</Button>
        </Link>
      {:else}
        <Button
          label="connect via builtin wallet"
          disabled={!$builtin.available || $wallet.connecting}
          on:click={() => flow.connect('builtin')}>
          <i class="fas fa-sign-in-alt mr-2" />
          Connect Wallet
        </Button>
      {/if}
    </li>
  </ul>
</nav>
